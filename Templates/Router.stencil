import Foundation
import Swiftkiq

class Router: Routable {
    func dispatch(_ work: UnitOfWork, errorCallback: WorkerFailureCallback) throws {
        switch work.workerType {
        {% for type in types.based.Worker %}
        case "{{ type.name }}":
            try invokeWorker(workerType: {{ type.name }}.self, work: work, errorCallback: errorCallback)
        {% endfor %}
        default:
            throw RouterError.notFoundWorker
        }
    }
}
